<ul class="panelbar">
    <li class="k-state-active">
        <span class="k-link k-state-selected">Question @Model?.Id</span>
        <div>
            <p>
                @Html.Raw(Model.H1OpenTag)
                You are configuring a Network Security Group (NSG) to allow only Remote Desktop Connections and HTTP traffic from the internet. This NSG will be created for reuse on multiple virtual network (VNet) subnets within the same Azure subscription.
                @Html.Raw(Model.H1CloseTag)
            </p>
            <p>
                @Html.Raw(Model.H2OpenTag)
                You need to complete the PowerShell cmdlets.
                @Html.Raw(Model.H2CloseTag)
            </p>
            <p>
                How should you complete the cmdlets? To answer, select the appropriate options from the drop-down menus.
            </p>
        </div>
    </li>
    <li class="k-state-active">
        Answers
       TO DO
    </li>
    <li>
        Explanation
        <div>
            <p>
                You should complete the cmdlets in the following way:
            </p>
            <p>
                $rule1 = New-AzureRmNetworkSecurityRuleConfig -Name rdp -Description "Allow RDP" -Access Allow -Protocol Tcp -Direction Inbound -Priority 100 -SourceAddressPrefix Internet -SourcePortRange * -DestinationAddressPrefix * -DestinationPortRange 3389
            </p>
            <p>
                $rule2 = New-AzureRmNetworkSecurityRuleConfig -Name web -Description "Allow HTTP" -Access Allow -Protocol Tcp -Direction Inbound -Priority 101 -SourceAddressPrefix Internet -SourcePortRange * -DestinationAddressPrefix * -DestinationPortRange 80
            </p>
            <p>
                $nsg = New-AzureRmNetworkSecurityGroup -ResourceGroupName TestRG -Location westus -Name "NSG-FrontEnd" -SecurityRules $rule1,$rule2
            </p>
            <p>
                When planning a new Azure NSG, you have to consider the rules that will apply to the configuration. The first steps are to create new configuration rule, then create configurations for each of the rules, and then create a new security group containing the rules. You use the New-AzureRMNetworkSecurityRuleConfig cmdlet for the first two steps to generate the configuration of the rules. Then you use the New-AzureRMNetworkSecurityGroup cmdlet to assign the two rules to the new group. This group can then be assigned to multiple vVNet subnets as needed to implement the rules.
            </p>
            <p>
                You should not use the Set-AzureRMNetworkIPInterfaceConfig cmdlet. This cmdlet is used to modify an existing IP configuration that has already been applied to an interface. It does not help to configure a new one.
            </p>
            <p>
                The Set-AzureRMNetworkSecurityGroup cmdlet is used to set the goal state for an NSG such as the allowed rules or allow and deny based on those rules. It is not needed to set up a new NSG.
            </p>
            <p>
                The Set-AzureRMNetworkSecurityRuleConfig cmdlet is used to modify an existing NSG configuration. It is not used to configure the configuration for a new security rule.
            </p>
        </div>
    </li>
    <li>
        References
        <div>
            <p>
                <a href="https://docs.microsoft.com/en-us/powershell/module/azurerm.network/new-azurermnetworksecurityruleconfig" target="_blank" rel="noopener" >New- AzureRMNetworkSecurityRuleConfig</a>
            </p>
            <p>
                <a href="https://docs.microsoft.com/en-us/powershell/module/azurerm.network/new-azurermnetworksecuritygroup" target="_blank" rel="noopener" >New- AzureRMNetworkSecurityGroup</a>
            </p>
            <p>
                <a href="https://docs.microsoft.com/en-us/powershell/module/azurerm.network/set-azurermnetworksecurityruleconfig" target="_blank" rel="noopener" >Set-AzureRMNetworkSecurityRuleConfig</a>
            </p>
            <p>
                <a href="https://docs.microsoft.com/en-us/powershell/module/azurerm.network/set-azurermnetworkinterfaceipconfig" target="_blank" rel="noopener" >Set-AzureRMNetworkInterfaceIPConfig</a>
            </p>
            <p>
                <a href="https://docs.microsoft.com/en-us/powershell/module/azurerm.network/set-azurermnetworksecuritygroup" target="_blank" rel="noopener" >Set-AzureRMNetworkSecurityGroup</a>
            </p>
        </div>
    </li>
</ul>