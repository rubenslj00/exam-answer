
<ul class="panelbar">
    <li class="k-state-active">
        <span class="k-link k-state-selected">Question @Model?.Id</span>
        <div>
            <p>
                @Html.Raw(Model.H1OpenTag)
                You design a virtual network (VNet) topology with the following characteristics:
                @Html.Raw(Model.H1CloseTag)
            </p>
            <p>
                @Html.Raw(Model.H2OpenTag)
                * web subnet: 3 web front-end virtual machines (VMs)
                <br />
                * app subnet: 3 application server VMs
                <br />
                * data subnet: 3 database server VMs
                @Html.Raw(Model.H2CloseTag)
            </p>
            <p>
                The client requires that inter-subnet network traffic be strictly controlled with network security groups (NSGs).
            </p>
            <p>
                You need to design a solution that minimizes NSG rule creation and maintenance.
            </p>
            <p>
                What should you do?
            </p>
        </div>
    </li>
    <li class="k-state-active">
        Answers
        <div>
            <p>
                <ul class="fieldlist">
                    <li>
                        <input type="radio" name="group" id="@(Html.GetNextId())" class="k-radio">
                        <label class="k-radio-label" for="@(Html.GetNextId(true))">
                            Enable the built-in rules in each NSG. False
                        </label>
                    </li>
                    <li class="correct">
                        <input type="radio" name="group" id="@(Html.GetNextId())" class="k-radio">
                        <label class="k-radio-label" for="@(Html.GetNextId(true))">
                            Define application security groups (ASGs) that align to each application tier.
                        </label>
                    </li>
                    <li>
                        <input type="radio" name="group" id="@(Html.GetNextId())" class="k-radio">
                        <label class="k-radio-label" for="@(Html.GetNextId(true))">
                            Bind a route table to each subnet.
                        </label>
                    </li>
                    <li>
                        <input type="radio" name="group" id="@(Html.GetNextId())" class="k-radio">
                        <label class="k-radio-label" for="@(Html.GetNextId(true))">
                            Employ the VirtualNetwork NSG service tag in each NSG.
                        </label>
                    </li>
                    <li>
                        <input type="radio" name="group" id="@(Html.GetNextId())" class="k-radio">
                        <label class="k-radio-label" for="@(Html.GetNextId(true))">
                            New-AzureRmVMDataDisk
                        </label>
                    </li>
                </ul>
            </p>
        </div>
    </li>
    <li>
        Explanation
        <div>
            <p>
                You should define ASGs that align to each application tier. ASGs allow you to target inbound or outbound NSG security rules to workloads. For instance, you could create an ASG that includes the three web servers, a second ASG for the three application servers, and a third ASG that includes the three database servers. You then reference the ASG tags in your NSG rules. This simplifies network administration in Azure and makes rule maintenance more straightforward. For example, if you add a fourth web server to the VNet subnet, then all you have to do is include that new server to your ASG definition.
            </p>
            <p>
                You should not enable the built-in rules in each NSG because none of these rules meets the requirements. The three Azure-provided default NSG rules do the following:
            </p>
            <p>
                * Allow all inbound and outbound VNet traffic.
                <br />
                * Allow an Azure load balancer to send health probes through the NSG.
                <br />
                * Deny any traffic for which a prior rule does not match.
            </p>
            <p>
                You should not employ the VirtualNetwork NSG service tag in each NSG. Service tags do make it easier to write NSG security rules and thereby control traffic. However, the best application of service tags for this use case is to create ASGs that map to the client's three infrastructure-as-a-service (IaaS) workloads.
            </p>
            <p>
                You should not bind a route table to each subnet. Route tables are used in conjunction with network virtual appliances (NVAs) to customize inter-subnet routing. However, the tables on their own increase complexity and represent an incomplete configuration.
            </p>
        </div>
    </li>
    <li>
        References
        <div>
            <p>
                <a href="https://azure.microsoft.com/en-us/blog/applicationsecuritygroups/" target="_blank" rel="noopener" >Application Security Groups now generally available in all Azure regions</a>
            </p>
            <p>
                <a href="https://docs.microsoft.com/en-us/azure/virtual-network/tutorial-filter-network-traffic" target="_blank" rel="noopener" >Tutorial: Filter network traffic with a network security group using the Azure Portal</a>
            </p>
            <p>
                <a href="https://docs.microsoft.com/en-us/azure/virtual-network/security-overview" target="_blank" rel="noopener" >Security groups</a>
            </p>
            <p>
                <a href="https://docs.microsoft.com/en-us/azure/virtual-network/tutorial-create-route-table-portal" target="_blank" rel="noopener" >Tutorial: Route network traffic with a route table using the Azure portal</a>
            </p>
        </div>
    </li>
</ul>